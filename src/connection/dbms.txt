create table user(
 ID string primary key not null,
 name string not null,
 rank string check(rank=="管理员" or rank=="教师" or rank=="学生")
);

create table meslog(
 ID string not null,
 text string,
 mes_time datetime not null
);

create table sign(
 ID string not null,
 sign_time datetime not null,
 foreign key(ID) references user(ID)
);



insert into user values("M001","总务处","管理员");
insert into meslog values("M001","Hello World",datetime("now","localtime"));
insert into sign values("M001",datetime("now","localtime"));

create trigger sign_in after insert
on user
begin
 insert into sign(ID, sign_time) values(new.ID, datetime("now","localtime"));
end;

insert into user values("S001","李明","学生");